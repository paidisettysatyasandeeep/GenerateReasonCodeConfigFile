{"version":3,"file":"UploadScreen.controller.js","names":["sap","ui","define","Controller","JSONModel","HBox","VBox","Input","TextArea","Label","Button","MessageToast","extend","CSV_COLUMNS","onInit","oModel","sites","key","text","selectedSite","timeElement","reasonCode1","locked","rows","rowCount","setSizeLimit","this","getView","setModel","_oModel","_oDynamicRows","byId","_updateRowCount","aRows","getProperty","setProperty","length","onConfirmInitialRow","sSite","sTime","sReason1","toUpperCase","String","trim","show","exists","some","r","site","time","reason1","reason2","reason3","initialDescription","getDescriptionFromCodes","unshift","description","setEnabled","onAddReasonRow","oReason2Input","width","placeholder","oReason3Area","oAddButton","attachPress","getEnabled","_onSaveRow","setTimeout","bind","oRemoveTmp","icon","press","removeItem","hbox","items","justifyContent","addItem","onClearInitialRow","sReason2","getValue","sReason3Raw","aReason3","split","map","v","filter","Boolean","existingSet","Set","join","added","headerKey","has","push","add","forEach","singleReason3","sDescription","_removeContainingHBox","oControl","aItems","getItems","i","findAggregatedObjects","indexOf","onDeleteRow","oEvent","oSource","getSource","oParent","getParent","isA","jQuery","log","warning","oListItem","oTable","iIndex","indexOfItem","splice","oClearButton","oDownloadButton","oClearAllButton","onClearAll","removeAllItems","mapRowToCsv","row","cols","SITE","TIME_ELEMENT","REASON_CODE1","REASON_CODE2","REASON_CODE3","REASON_CODE4","REASON_CODE5","REASON_CODE6","REASON_CODE7","REASON_CODE8","REASON_CODE9","SEQUENCE","MARK_FOR_DELETION","DESCRIPTION_EN","DESCRIPTION_FR","DESCRIPTION_DE","c","undefined","getFileName","reasonCode","oView","oCombo","sText","getSelectedItem","getText","sSentence","toString","word","charAt","slice","toLowerCase","today","Date","finalDate","getMonth","padStart","getDate","getFullYear","fileName","onDownloadCSV","sFileName","aHeader","escapeCsvField","value","s","replace","sCSV","aValues","aEscaped","blob","Blob","type","navigator","msSaveBlob","link","document","createElement","download","url","URL","createObjectURL","setAttribute","style","visibility","body","appendChild","click","removeChild"],"sources":["UploadScreen-dbg.controller.js"],"mappings":"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","ignoreList":[]}